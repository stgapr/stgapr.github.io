<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#33363b">
    <meta name="msapplication-TileColor" content="#33363b">
    
    
    
    
    <meta name="keywords" content="Life, Tech, Galgame, Anime, Manga, Programming, Harmonica, Novel, Guitar, Cooking">
    
    
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    
    
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-chrome-192x192.png">
    
    
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    
    
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    
    
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#33363b">
    
    
    <link rel="manifest" href="/favicons/site.webmanifest">
    
    
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    
    
    <link rel="alternate" href="/atom.xml" title="水与榕" type="application/atom+xml">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
    
    
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
    
    <link rel="stylesheet" type="text/css" href="/css/sidebar.css">
    
    
<link rel="stylesheet" type="text/css" href="/css/page.css">
<link rel="stylesheet" type="text/css" href="/css/post.css">

    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <link rel="stylesheet" type="text/css" href="/css/atom-one-dark.css">
    <link rel="stylesheet" type="text/css" href="/css/lightgallery.min.css">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script defer type="text/javascript" src="/js/util.js"></script>
    <script defer type="text/javascript" src="/js/scrollspy.js"></script>
    <script defer type="text/javascript" src="/js/fontawesome-all.min.js"></script>
    <script defer type="text/javascript" src="/js/lightgallery.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-fullscreen.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-hash.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-pager.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-thumbnail.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-zoom.min.js"></script>
    
    <script defer src="/js/busuanzi.pure.mini.js"></script>
    
    
    <script defer type="text/javascript" src="/js/search.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
      var searchPath = "search.xml";
      if (searchPath.length === 0) {
        searchPath = "search.xml";
      }
      var path = "/" + searchPath;
      searchFunc(path, "search-input", "search-result");
    });
    </script>
    
    
    <script defer type="text/javascript" src="/js/index.js"></script>
    
    <script defer type="text/javascript" src="/js/custom.js"></script>
    <title>在机顶盒上打黄油（上） | 水与榕</title>
  </head>
  <body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN" data-spy="scroll" data-target=".list-group">
    
<header id="header" class="header" style="background: #33363b;">
  <div class="container">
    <div class="header-container">
      <div class="header-title">
        <h1 class="title"><a href="/">水与榕</a></h1>
        <h2 class="subtitle"></h2>
      </div>
      
    </div>
    <nav id="nav" class="nav">
      <a id="nav-toggle" class="nav-toggle" aria-hidden="true"><i class="fas fa-bars" aria-label="Toggle Navbar"></i></a>
      <ul id="menu" role="menubar" aria-hidden="false">
        
        <li role="menuitem"><a href="/">Home</a></li>
        
        <li role="menuitem"><a href="/archives/">Archives</a></li>
        
        <li role="menuitem"><a href="/categories/">Categories</a></li>
        
        <li role="menuitem"><a href="/tags/">Tags</a></li>
        
        <li role="menuitem"><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</header>


    <main id="main" class="main">
      <div class="container">
        <div class="main-container">
          <div class="content">
            
<div id="post" class="page">
  
  <article class="article post card animate" itemscope="" itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="https://stgapr.github.io/post/gal-on-settopbox-1/">
      <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
       <meta itemprop="name" content="桃ましまろ">
       <meta itemprop="description" content="">
       <meta itemprop="image" content="/images/avatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
       <meta itemprop="name" content="水与榕">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">在机顶盒上打黄油（上）</h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2020-08-15T11:15:04+08:00">2020-08-15 11:15:04</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/笔记/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a></span>
        </span>
        
        
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      <p>在这篇硬核文章中，我将介绍如何在ARM芯片的廉价机顶盒上运行X86平台的galgame。不是远程桌面，也不是kirikiroid，货真价实童叟无欺。但是有点hardcore。所以分成上下篇写。</p>
<p>首先感谢@虾包 的技术支持。</p>
<a id="more"></a>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>有时候我们实在蛋疼，找不到替代品，非得在Linux或者OS X上跑传统的Windows<del>游戏</del>生产力软件。想到的方案，除了用QEMU、bochs等虚拟机，就是Wine（或者crossover之类衍生版），特定种类游戏的话可能有人做其他平台的引擎移植（像ons、pymo、kikiroid）。</p>
<p>Wine的原理是把Windows API用POSIX 实现了一遍，然后让（兼容POSIX标准的）宿主系统去执行。虽然Wine也最近除了X86版本的release，也提供了ARM版本的，连Android的ARM或X86架构的 release都有。但是——ARM release的只能跑ARM的程序，X86 release的只能跑X86的程序。毕竟CPU架构如天堑。</p>
<p>不过最近微博上看到M$核心程序员兼女装大佬Tlaster买了台特别昂贵的笔记本Surface Pro X，跑传说中的Windows on ARM系统。她晒了一张图：</p>
<p><img src="//stgapr.github.io/post/gal-on-settopbox-1/tsukiyori_SQ1.PNG" alt="在ARM架构的SQ1芯片上跑X86程序"></p>
<p>这就有点牛逼了。因为这款笔记本跑的是高通定制的ARM架构的SQ1处理器。而黄油厂商我还没听说过技术先进到提供ARM platform  target的Galgame。也就是说这个版本的Windows 在二进制层面实现了一个X86到ARM的指令转换。不需要X86 EXE作任何修改、远非几年前的Windows RT能做得到的。</p>
<h2 id="可行性和方案"><a href="#可行性和方案" class="headerlink" title="可行性和方案"></a>可行性和方案</h2><p>于是我就想做类似的事情。首先去查了<a href="https://docs.microsoft.com/en-us/windows/arm/" target="_blank" rel="noopener">Windows Documentation</a>SDN上查了一下原理。发现类似64位windows兼容32位windows程序的途径——用<a href="https://docs.microsoft.com/en-us/windows/win32/winprog64/running-32-bit-applications" target="_blank" rel="noopener">WoW64层</a>，并且缓存这些已翻译的代码块，以减少指令翻译的开销，并在代码再次运行时进行优化。<br>所以Windows10 on ARM的windows目录里面，加上原本的X86_64和X86_32兼容设施——至少有三套system文件夹，啊不，实际上是四套：</p>
<p><strong>System32</strong>: ARM 64 位系统文件</p>
<p><strong>SyCHPE32</strong>： CHPE DLL，供 x86 程序调用，内部是 ARM 机器码（使得核心系统库不需要进行二进制翻译，减少性能损失)</p>
<p><strong>SysARM32</strong>: ARM 32 位系统文件</p>
<p><strong>SysWOW64</strong>: x86 32 位系统文件</p>
<p>其中给ARM处理器做X86指令的二进制翻译的关键DLL是<a href="https://docs.microsoft.com/en-us/windows/win32/winprog64/wow64-implementation-details" target="_blank" rel="noopener">xtajit.dll</a>。并且官方说这个函数巨复杂巨长，毕竟两种架构的CPU指令集完全不一样。根据爱好者测试，X86程序在ARM处理器上的翻译执行效率大概能达到原生的60%左右。WineHQ社区估计一时半会儿也没有精力重复造轮子，一是净室原则，二是Intel反复敲打版权风险。还好发现github上也有几个实验性项目。</p>
<p>如<a href="https://wiki.winehq.org/Emulation" target="_blank" rel="noopener">WineHQ的这篇wiki</a>所说，想实现ARM平台跑X86程序（先不说操作系统），大概有三种曲线救国的途径：</p>
<ul>
<li><p>处理器模拟。也就是异构模拟。最省事，也最慢。也就是用QEMU、virtualbox之类的虚拟机软件模拟整个X86 CPU，上面再装一个X86的操作系统。Bluestack、Windroy等都是一个原理。</p>
</li>
<li><p>用户模式模拟。也就是用QEMU user space emulator之类的用户态X86仿真程序，在syscall级别跳出。效率稍微好一点。有的人可能玩过一些基于chroot或者proot——在安卓手机上跑Linux的<a href="https://github.com/meefik/linuxdeploy" target="_blank" rel="noopener">deploylinux</a>和Anlinux。优点是可以利用宿主的Linux内核，不需要再整一套镜像（因此，假如要跑windows exe，还需要配合X86版本的wine）。代表项目<a href="https://github.com/ptitSeb/box86" target="_blank" rel="noopener">box86</a></p>
</li>
<li><p>在操作系统API层面的仿真。和用户模式模拟类似，但更快一点。代表项目如<a href="https://github.com/AndreRH/hangover" target="_blank" rel="noopener">hangover</a>（宿醉。这名字起的……）</p>
<p>有人可能会提起ExGear，但是：</p>
</li>
</ul>
<blockquote>
<p>A solution that I explored already in the past was ExaGear, which allowed running of x86 applications on ARM by emulating the CPU instructions, but not the entire PC.</p>
<p>Well ExaGear, although quite good, had one very big flaw: it was running everything in the i386 (x86) environment, which also is the case for the GPU drivers, which limited the the software only for use with applications that did not require 3D acceleration. Basically, any game that used “modern” graphics did not work, since it required OpenGL, which our ODROIDs lack the necessary drivers for and especially not for i386.</p>
</blockquote>
<p>于是工具落在了hangover和box86两者之间。</p>
<h3 id="hangover-和box86"><a href="#hangover-和box86" class="headerlink" title="hangover 和box86"></a>hangover 和box86</h3><p>hangover有一个缺点，它要靠QEMU做X86到ARM指令的转换，而且加入要用Wine也必须是64位的。hangover的开发方向主要是在64位平台（AArch64，X86_64）上跑64位程序，只是顺便兼容32位。它的Android分支也停止开发很久了。</p>
<p>而box86专心兼容X86_32（<strong>它不支持64位用户程序</strong>），用的X86 emulator是<a href="https://github.com/wfeldt/libx86emu" target="_blank" rel="noopener">libx86emu</a>的修改版。并且据官方readme文档所言，“box86 uses the native versions of some “system” libraries, like libc, libm, SDL, and OpenGL, it’s easy to integrate and use, and performance can be surprisingly high in some cases.”  </p>
<blockquote>
<p>应用程序所需的许多库都从ARM板重定向到了库，比如说Box86可以从ARM主机系统使用SDL2，而不是使用i386的SDL2。这也包括GPU驱动程序。如果应用程序需要运行OpenGL，它将不再要求i386 OpenGL驱动程序，而是ARM OpenGL驱动程序。还有许多其他库，例如SDL，OpenAL，X11等，也可以从本机ARM环境中使用，而不是使用i386中的所有库。这也意味着与需要完整i386环境的ExaGear相比，i386中需要的库要少得多。</p>
</blockquote>
<p>这个思路就很像微软的CHPE。</p>
<p>box86好像相当成熟，甚至已经有人基于该项目做了一个retro gaming向的<a href="https://twisteros.com/" target="_blank" rel="noopener">树莓派系统Twister OS（原名Raspbian X）</a>。</p>
<p>那我就选择box86来折腾了。顺便一提，目标平台可以是ARM HF（AArch64）也可以是32位的ARM。家里没有别的可折腾的ARM设备，可以考虑机顶盒或者Android手机了。也可以拿最好拿闲置的树莓派之类硬件。稍微有点千来块预算的，可以买一台<a href="https://plumz.me/archives/9636/" target="_blank" rel="noopener">ARM芯片的廉价笔记本Pinebook</a>。</p>
<h2 id="构建box86"><a href="#构建box86" class="headerlink" title="构建box86"></a>构建box86</h2><h3 id="关于ARM的架构"><a href="#关于ARM的架构" class="headerlink" title="关于ARM的架构"></a>关于ARM的架构</h3><blockquote>
<p>You <em>NEED</em> a 32-bit subsystem to run and build box86. box86 is useless on 64-bit only systems. Also, you <em>NEED</em> a 32-bit toolchain to build box86. A toolchain that only support 64-bit will not compile box86, and you’ll get errors (typically on aarch64, you get “-marm” not recognized).</p>
</blockquote>
<p>意思很明白：因为box86的原理是直接把X86_32代码转译到主机系统平台。要在（例如）ARM64平台上运行box86，需要为32位ARM构建box86，并且还需要具有32位库的chroot。重复一遍，<strong>box86不包含任何32位到64位的转换。</strong>当然我们在X86机器上交叉编译（比如编译到32位的ARM时）时，要提供一个32位的工具链。我们可以用Linaro。</p>
<h3 id="下载交叉编译工具链"><a href="#下载交叉编译工具链" class="headerlink" title="下载交叉编译工具链"></a>下载交叉编译工具链</h3><p>先<a href="http://releases.linaro.org/components/toolchain/binaries/" target="_blank" rel="noopener">去linaro网站</a>或者<a href="https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain" target="_blank" rel="noopener">ARM官网</a>或者<a href="https://mirrors.tuna.tsinghua.edu.cn/armbian-releases/_toolchains/" target="_blank" rel="noopener">清华镜像源</a>下载交叉编译工具链。记得选择带有x86_64_arm(v8l)-linux-gnueabihf字样的。<a href="https://www.cnblogs.com/lixuejian/p/12848728.html" target="_blank" rel="noopener">复习下交叉编译器的命名规则</a>，为了可以在ARMV8、ARM64等同时兼容64位和32位的CPU的32位模式上运行，我们必须保证目标程序集是32位的，让CPU向下兼容。</p>
<p>注意工具链里的armv8l指的armv8标准的32位模式。而64位模式的工具链的关键字是Aarch64。另外官网指出宿主架构必须是32位小端序（little endian），在这里也就是armel（armle，arm eabi little-endian），不能是armeb。（不过工具链里面一般都是litle endian，除非特意标出是armeb。）</p>
<p>soft floating point还是hard floating point（Armhf）的话，最好选HF。</p>
<blockquote>
<p>用softfp模式，会存在不必要的浮点到整数、整数到浮点的转换。而使用hard模式，在每次浮点相关函数调用时，平均能节省20个CPU周期。对ARM这样每个周期都很重要的体系结构来说，这样的提升无疑是巨大的。对一些严重依赖于浮点运算的程序，更是可以达到300%的性能提升。</p>
</blockquote>
<p>我下载的包名是gcc-linaro-7.5.0-2019.12-x86_64_armv8l-linux-gnueabihf.tar.xz。</p>
<p>解压。</p>
<figure class="hljs highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">xz</span> <span class="selector-tag">-d</span> <span class="selector-tag">gcc-linaro-7</span><span class="selector-class">.5</span><span class="selector-class">.0-2019</span><span class="selector-class">.12-x86_64_armv8l-linux-gnueabihf</span><span class="selector-class">.tar</span><span class="selector-class">.xz</span></span><br></pre></td></tr></table></figure>
<p>安装到喜欢的目录。</p>
<figure class="hljs highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -<span class="selector-tag">p</span> /usr/local/toochain</span><br><span class="line">sudo tar -xvf gcc-linaro-<span class="number">7.5</span>.<span class="number">0</span>-<span class="number">2019.12</span>-x86_64_armv8l-linux-gnueabihf<span class="selector-class">.tar</span> -C /usr/local/toolchain</span><br></pre></td></tr></table></figure>
<p>添加环境变量并刷新环境。</p>
<figure class="hljs highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PATH=<span class="variable">$PATH</span><span class="symbol">:/usr/local/toolchain/gcc-linaro-</span><span class="number">7.5</span>.<span class="number">0</span>-<span class="number">2019.12</span>-x86_64_armv8l-linux-gnueabihf/bin</span><br><span class="line">source ~<span class="regexp">/.bashrc</span></span><br></pre></td></tr></table></figure>
<p>验证下是否能识别到编译器。</p>
<figure class="hljs highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">armv8l-linux-gnueabihf-gcc -v</span><br></pre></td></tr></table></figure>
<h3 id="编译box86"><a href="#编译box86" class="headerlink" title="编译box86"></a>编译box86</h3><p>先把代码拉下来。<br><figure class="hljs highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">clone</span> <span class="title">https</span>://github.com/ptitSeb/box86.git</span><br></pre></td></tr></table></figure></p>
<p>cmake。<br><figure class="hljs highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd box86; mkdir build; cd build; </span><br><span class="line">cmake <span class="built_in">..</span> <span class="attribute">-DARM_DYNAREC</span>=ON \</span><br><span class="line"><span class="attribute">-DCMAKE_BUILD_TYPE</span>=RelWithDebInfo \</span><br><span class="line"><span class="attribute">-DCMAKE_SYSTEM_PROCESSOR</span>=arm \</span><br><span class="line"><span class="attribute">-DCMAKE_C_COMPILER</span>=armv8l-linux-gnueabihf-gcc;</span><br></pre></td></tr></table></figure></p>
<p>注意-DCMAKE_C_COMPILER，交叉编译的时候不指定的话会出现平台参数错误。</p>
<p>这里面有一个dynarec选项。JIT / Dynarec / Hotspot之类的技术会把转换过的指令段缓存起来，有助于提高程序载入速度。这也是在CMakeLists.txt里面实现控制逻辑的。</p>
<blockquote>
<p>The Dynarec is only avaiable on ARM Cpu. Notes also that VFPv3 and NEON are required for the Dynarec. Activate it by using <code>-DARM_DYNAREC=1</code>. Also, be sure to use <code>-marm</code> in compilation flags (because many compileur use Thumb as default, and the dynarec will not work in this mode).</p>
</blockquote>
<p>box64特有的其他编译选项见<a href="https://github.com/ptitSeb/box86/blob/master/COMPILE.md" target="_blank" rel="noopener">COMPILE.md</a>。</p>
<p>此外也可以手动指定编译参数。假如你的目标设备没有在CMakeLists.txt里面add_definitions、 set(CMAKE_ASM_FLAGS=…)的话。自己的目标平台相关参数可以去网络上找。也可以参考 -gcc –target-help。</p>
<figure class="hljs highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">CFLAGS</span>=<span class="string">"-march=armv8-a -mtune=cortex-a53"</span></span><br></pre></td></tr></table></figure>
<p>然后正式执行编译和链接。（后面的ARCH 、CROSS_COMPILE选项可以不要。假如makefile有好好地生成）</p>
<figure class="hljs highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make -j8 <span class="attribute">ARCH</span>=arm <span class="attribute">CROSS_COMPILE</span>=armv8l-linux-gnueabihf-</span><br></pre></td></tr></table></figure>
<p>大概10秒钟就编译好了。在build目录下会生成box86（可执行文件）和libdynarec.a（库，假如你有开启dynarec选项），还有cmake生成的一堆没用的参数文件。之后我们需要把这两个文件拷贝到目标ARM机器上。</p>
<p>这时候我们确认一下程序的架构。切换到build目录下，运行</p>
<figure class="hljs highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">file</span> ./box86</span><br></pre></td></tr></table></figure>
<p>应该能看到类似</p>
<blockquote>
<p>ELF 32-bit LSB executable,ARM EABI5 version1 (SYSV), dynamically linked, interpreter…</p>
</blockquote>
<p>之类的信息。这说明这是一个Linux格式的可执行文件（ELF），32位，ARM架构。在编译的这台X86机器上该程序是执行不了的，它只能在ARM机器上执行。</p>
<h3 id="（可选）编译GL4ES"><a href="#（可选）编译GL4ES" class="headerlink" title="（可选）编译GL4ES"></a>（可选）编译GL4ES</h3><p>不少Windows程序用的是DirectX，Wine也自己用OpenGL实现了一遍DirectX API。但假如你用的是嵌入式设备，就是那些只支持OpenGLES的，就麻烦了。好在<a href="https://github.com/ptitSeb/gl4es" target="_blank" rel="noopener">GL4ES</a>提供了GLES硬件的OpenGL接口功能，只是GL4ES目前在Wine上面工作得不是很好。聊胜于无吧。</p>
<p>（待续）</p>

    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/技术/" rel="tag"><i class="fas fa-tags"></i>技术</a>
        
        <a class="post-tag button" href="/tags/X86/" rel="tag"><i class="fas fa-tags"></i>X86</a>
        
        <a class="post-tag button" href="/tags/ARM/" rel="tag"><i class="fas fa-tags"></i>ARM</a>
        
        <a class="post-tag button" href="/tags/程序仿真/" rel="tag"><i class="fas fa-tags"></i>程序仿真</a>
        
      </div>
      
    </footer>
  </article>
  
  
  <nav class="page-nav">
    <div class="page-nav-next page-nav-item">
      
      <a href="/post/Anthemscore-linux/" rel="next" title="AnthemScore"><i class="fas fa-angle-left"></i><span class="nav-title">AnthemScore</span></a>
      
    </div>
    <div class="page-nav-prev page-nav-item">
      
      <a href="/post/tateyoko/" rel="prev" title="写了一个竖排书籍的横向重排版工具"><span class="nav-title">写了一个竖排书籍的横向重排版工具</span><i class="fas fa-angle-right"></i></a>
      
    </div>
  </nav>
  
  
  

<div class="comments" id="comments">

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<div id="gitalk-container"></div>
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: 'fc5cc78006347ed7f2b8',
        clientSecret: 'eb4cc326feb2418f9add0833f57adbe9e423fb43',
        id: window.location.pathname,
        repo: 'lilis',
        owner: 'stgapr',
        admin: 'stgapr'
    })
    gitalk.render('gitalk-container')
</script>


</div>



  
</div>

          </div>
          
          
          
<aside class="sidebar" id="sidebar" style="background: url(/images/background.png);">
  
  <div class="search">
    <div class="form-group">
      <i class="fas fa-search"></i><input type="search" id="search-input" name="q" results="0" placeholder="Search" class="form-control">
    </div>
  </div>
  <div class="search-result-box" id="search-result"></div>
  
  
<div class="info sidebar-item" id="info">
  
  <img class="author-avatar" src="/images/avatar.png" alt="桃ましまろ">
  
  <h1 class="author-name">桃ましまろ</h1>
  <h2 class="author-description"></h2>
  <div class="site-count">
    
    <div class="archives-count">
      <div class="site-count-title">Archives</div>
      <div><a href="/archives/">104</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="categories-count">
      <div class="site-count-title">Categories</div>
      <div><a href="/categories/">5</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="tags-count">
      <div class="site-count-title">Tags</div>
      <div><a href="/tags/">112</a></div>
    </div>
    
  </div>
  
  <div class="rss">
    <a class="rss-link button sidebar-item" href="/atom.xml"><i class="fas fa-rss"></i>RSS</a>
  </div>
  
</div>


  <div class="sidebar-sticky">
    
    
    
    
    
    <hr>
    <div class="post-toc sidebar-item" id="toc-div">
      <div><i class="fas fa-list-ol"></i>Table of Contents</div>
      <div class="post-toc-content"><ol class="list-group toc"><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#前言"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#可行性和方案"><span class="toc-text">可行性和方案</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#hangover-和box86"><span class="toc-text">hangover 和box86</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#构建box86"><span class="toc-text">构建box86</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#关于ARM的架构"><span class="toc-text">关于ARM的架构</span></a></li><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#下载交叉编译工具链"><span class="toc-text">下载交叉编译工具链</span></a></li><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#编译box86"><span class="toc-text">编译box86</span></a></li><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#（可选）编译GL4ES"><span class="toc-text">（可选）编译GL4ES</span></a></li></ol></li></ol></div>
    </div>
    
    
    
    <hr>
    <div class="social-link sidebar-item">
      <div><i class="far fa-address-card"></i>Social Links<p></p></div>
      <ul>
        
        <li><i class="fas fa-envelope"></i><a href="mailto:stgapr29@gmail.com" target="_blank">Email</a></li>
        
        <li><i class="fab fa-github"></i><a href="https://github.com/stgapr" target="_blank">Github</a></li>
        
      </ul>
    </div>
    
    
    <hr>
    <div class="blogroll sidebar-item">
      <div><i class="fas fa-link"></i>Blogroll</div>
      <ul>
        
        <li><a href="https://yuukoamamiya.github.io/" target="_blank">雨宫优子</a></li>
        
        <li><a href="https://plumz.me/" target="_blank">plum</a></li>
        
        <li><a href="https://incises.github.io/" target="_blank">Incises</a></li>
        
        <li><a href="https://mistakey.top/" target="_blank">叶月辉夜</a></li>
        
        <li><a href="https://sh.alynx.moe" target="_blank">喵's StackHarbor</a></li>
        
        <li><a href="https://pockies.github.io/" target="_blank">Pockies</a></li>
        
        <li><a href="http://noodlefighter.com/" target="_blank">虾包</a></li>
        
        <li><a href="https://www.natech.top/" target="_blank">无聊人士的低语</a></li>
        
        <li><a href="https://linhai1990.com/" target="_blank">四海为家的兔子</a></li>
        
        <li><a href="https://touko.moe/" target="_blank">Touko</a></li>
        
        <li><a href="https://suzumiyashirone.github.io/" target="_blank">涼宮シロネ</a></li>
        
        <li><a href="https://www.gazyip.cn/" target="_blank">八个比特</a></li>
        
        <li><a href="https://qwonsuzune.wordpress.com/" target="_blank">沙子小房间</a></li>
        
        <li><a href="https://zankyo.cc/" target="_blank">青花鱼</a></li>
        
        <li><a href="https://blog.uuz.moe/" target="_blank">雨宮千夏の博麗神社</a></li>
        
        <li><a href="https://luojia.me/" target="_blank">佳佳酱</a></li>
        
        <li><a href="https://lnet.me/" target="_blank">澜灯</a></li>
        
        <li><a href="https://taoxinhao.cn/" target="_blank">陶新昊</a></li>
        
        <li><a href="https://www.wikimoe.com/" target="_blank">WIKIMOE</a></li>
        
        <li><a href="http://www.misakas.com/" target="_blank">misakas</a></li>
        
        <li><a href="https://blog.ixk.me/" target="_blank">ixk.me</a></li>
        
        <li><a href="http://blog.dangodango.cn/" target="_blank">团子的小小世界</a></li>
        
        <li><a href="http://blog.9bie.org:8081/" target="_blank">⑨bie</a></li>
        
        <li><a href="https://utsuho.cn/" target="_blank">喵の空</a></li>
        
        <li><a href="https://www.rabbittu.com/" target="_blank">某兔子の御用花园</a></li>
        
        <li><a href="http://pea3nut.info/" target="_blank">花生PeA</a></li>
        
        <li><a href="http://www.iinorii.com/blog/" target="_blank">いつの間に</a></li>
        
        <li><a href="https://www.senayuki.top/" target="_blank">纷飞的小屋</a></li>
        
        <li><a href="http://whitebox.im/" target="_blank">白色箱子</a></li>
        
        <li><a href="http://code5light.com/" target="_blank">多事之秋</a></li>
        
        <li><a href="https://diygod.me/friends/" target="_blank">DIYGOD</a></li>
        
        <li><a href="https://ephen.me/" target="_blank">Ephen</a></li>
        
        <li><a href="https://ikk.me/" target="_blank">ikk.me</a></li>
        
        <li><a href="https://ikmoe.com/" target="_blank">月宅酱</a></li>
        
        <li><a href="https://www.rexskz.info/" target="_blank">ReX/Zeng</a></li>
        
        <li><a href="https://2heng.xin/" target="_blank">さくら荘の白猫</a></li>
        
        <li><a href="https://www.fczbl.vip/" target="_blank">犬's blog</a></li>
        
        <li><a href="https://aoaoao.me/" target="_blank">Aaron</a></li>
        
        <li><a href="https://blog.0xbbc.com/" target="_blank">3004</a></li>
        
        <li><a href="http://mouto.org/" target="_blank">卜卜口</a></li>
        
        <li><a href="https://wind.moe/links/" target="_blank">Windless</a></li>
        
        <li><a href="https://oao.moe/links/" target="_blank">oao</a></li>
        
        <li><a href="http://im.dimpurr.com/" target="_blank">钉子の次元</a></li>
        
        <li><a href="http://acgtyrant.com/" target="_blank">acgtyrant</a></li>
        
        <li><a href="https://asaba.sakuragawa.moe/" target="_blank">樱川浅羽</a></li>
        
        <li><a href="https://buta.moe/" target="_blank">Take Space</a></li>
        
        <li><a href="http://takumiyuki.hatenablog.com/" target="_blank">TakumiYuki</a></li>
        
        <li><a href="https://flandre-scarlet.moe/blog/" target="_blank">Re:memory</a></li>
        
      </ul>
    </div>
    
  </div>
</aside>


          
        </div>
      </div>
    </main>
    
<footer id="footer" class="footer" style="background: #33363b;">
  <div class="container">
    <div class="back-to-top">
      <button id="back-to-top"><i class="fas fa-angle-double-up" aria-label="Back to Top"></i></button>
    </div>
    <div class="footer-container">
      <div class="footer-left">
        <div class="copyright">
          <span class="author">桃ましまろ</span><span class="year"><i class="far fa-copyright"></i>1993 - 2020</span>
        </div>
        
        <div class="busuanzi">
          <span id="busuanzi_container_site_pv"><i class="fas fa-eye" aria-label="Site Visit Count" aria-hidden="false"></i><span id="busuanzi_value_site_pv"></span></span><span id="busuanzi_container_site_uv"><i class="fas fa-user" aria-label="Site User Count" aria-hidden="false"></i><span id="busuanzi_value_site_uv"></span></span><span id="busuanzi_container_page_pv"><i class="far fa-file-alt"></i><span id="busuanzi_value_page_pv" aria-label="Page Click Count" aria-hidden="false"></span></span>
        </div>
        
      </div>
      <div class="footer-right">
        <div class="custom-info">
          
          底下啥都没有了~
          
        </div>
        <div class="powered-by">
          Proudly Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> | Theme is <a href="https://github.com/AlynxZhou/hexo-theme-aria/" target="_blank">ARIA</a>
        </div>
      </div>
    </div>
  </div>
</footer>


  </body>
</html>
